---
sidebar_position: 2
description: Прием вебхуков на локальный сервер
slug: /cases/webhooks
---

# Прием вебхуков

CloudPub позволяет принимать вебхуки от внешних сервисов прямо на локальный сервер разработки. **Главное преимущество - встроенный инспектор трафика, который делает отладку вебхуков простой и наглядной.**

## Быстрый старт

```bash
# Запустите ваш локальный сервер с обработчиком вебхуков
# Затем опубликуйте его через CloudPub
clo publish http 3000 --name webhook-handler

# Используйте полученный URL в настройках внешнего сервиса
# https://your-domain.cloudpub.ru/webhooks
```

## Инспекция трафика

**Инспектор трафика CloudPub - это незаменимый инструмент при работе с вебхуками.** В отличие от локальной разработки, где вы видите только логи вашего приложения, инспектор показывает полную картину взаимодействия с внешними сервисами.

![Инспектор трафика](/img/inspector2.png)

### Почему инспектор идеален для отладки вебхуков

**Вебхуки часто приходят с неожиданными данными или в непредсказуемом формате.** Инспектор трафика решает эту проблему:

- **Видите запрос целиком** - все заголовки, включая подписи и токены аутентификации
- **Анализируете тело запроса** - точный JSON, который отправил сервис, без изменений вашим приложением
- **Отлавливаете ошибки быстрее** - видите, что именно приходит, даже если ваш обработчик падает
- **Проверяете webhook-подписи** - все необходимые данные для валидации на виду
- **Тестируете без изменения кода** - не нужно добавлять логирование в приложение

### Типичные сценарии использования

**GitHub Webhooks:** Видите полную структуру события, заголовки `X-GitHub-Event`, `X-Hub-Signature` для проверки подписи.

**Платежные системы:** Анализируете callback-запросы с деталями транзакций, проверяете подписи и форматы данных.

**Telegram Bot API:** Отлаживаете входящие обновления, видите структуру сообщений и callback-запросов.

### Настройка инспектора

Для включения инспектора трафика:
1. Перейдите в раздел "Профиль" в личном кабинете
2. Переключитесь на вкладку "Настройки"
3. Включите опции:
   - Запись HTTP заголовков
   - Запись тела HTTP запроса
4. Просматривайте запросы в разделе [Инспектор запросов](https://cloudpub.ru/dashboard/logs/)

**Совет:** Оставляйте инспектор включенным при разработке с вебхуками - это сэкономит часы на отладке!

## Примеры интеграций

### GitHub Webhooks
```bash
# Публикация обработчика GitHub вебхуков
clo publish http 4000 --name github-webhooks
```

### Telegram Bot API
```bash
# Публикация Telegram бота
clo publish http 5000 --name telegram-bot
# Используйте полученный URL для установки webhook в Telegram
```

### Платежные системы
```bash
# ЮKassa
clo publish http 8080 --name yookassa-callback

# Stripe
clo publish http 3000 --name stripe-webhook
```
