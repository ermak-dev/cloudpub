---
sidebar_position: 7
description: Контролируемое управление SSH доступом через CloudPub
slug: /cases/ssh-tunneling
---

# Контролируемый SSH доступ

CloudPub предоставляет **централизованное управление SSH доступом** с полным контролем и детальным логгированием всех соединений.

## Публикация SSH через CloudPub

```bash
# Публикация SSH через туннель CloudPub
clo publish tcp 22 --name secure-server

# Подключение через публичный адрес
ssh user@your-domain.cloudpub.ru -p 443
```

## Настройка фильтров доступа

```bash
# SSH только из определенных стран
clo publish tcp 22 --name geo-ssh \
  --filter "geo.country in ['RU', 'KZ']"

# Доступ только из офисной сети
clo publish tcp 22 --name office-ssh \
  --filter "ip.src == 192.168.1.0/24"

# Блокировка подозрительных регионов
clo publish tcp 22 --name protected-ssh \
  --filter "geo.country not in ['CN', 'VN', 'TH']"
```

## Управление множественными серверами

```bash
# Критичные серверы с жесткими ограничениями
clo publish tcp 22 --name production \
  --filter "ip.src == 10.0.0.0/8"

# Тестовые серверы с более мягкими правилами
clo publish tcp 22 --name staging \
  --filter "geo.country == 'RU'"

# Экстренная блокировка всех SSH
clo stop --all --filter "protocol == 'tcp' and port == 22"
```

## Инспектор запросов

CloudPub автоматически логирует все SSH сессии в **[Инспекторе запросов](https://cloudpub.ru/dashboards/logs/)**:

- **Время соединения** - начало и завершение сессии
- **IP-адрес клиента** - адрес подключающегося
- **Геолокация** - страна, регион, город
- **Объем трафика** - переданные и принятые данные
- **Статус** - успешное/заблокированное фильтром
- **Все попытки подключения** - включая неудачные

Для анализа логов:
1. Откройте [Инспектор запросов](https://cloudpub.ru/dashboards/logs/)
2. Выберите нужные столбцы для отображения
3. Фильтруйте по протоколу, порту, IP или геолокации

## Преимущества CloudPub

- **Централизованный контроль** всех SSH подключений
- **Полные логи** всех соединений в инспекторе
- **Географическая фильтрация** по странам и регионам
- **IP-фильтрация** для ограничения доступа
- **Мгновенное управление** через CLI
- **Аудит безопасности** - вся история в инспекторе
